name: Discord Notification

on: [push, pull_request]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Install curl
        run: sudo apt-get install -y curl

      - name: Send message to Discord
        run: |
          MESSAGE="üì¢ Evento GitHub:"
          
          # Aggiungi dettagli sull'azione (push o pull_request)
          if [[ "${{ github.event_name }}" == "push" ]]; then
            MESSAGE="${MESSAGE}\n‚ñ∂Ô∏è Azione: push"
            MESSAGE="${MESSAGE}\nüîß Repository: ${{ github.repository }}"
            MESSAGE="${MESSAGE}\nüë§ Autore: ${{ github.actor }}"
            MESSAGE="${MESSAGE}\nüí¨ Messaggio: ${{ github.head_ref }} commit: ${{ github.sha }}"
          elif [[ "${{ github.event_name }}" == "pull_request" ]]; then
            MESSAGE="${MESSAGE}\n‚ñ∂Ô∏è Azione: pull_request"
            MESSAGE="${MESSAGE}\nüîß Repository: ${{ github.repository }}"
            MESSAGE="${MESSAGE}\nüë§ Autore: ${{ github.actor }}"
            MESSAGE="${MESSAGE}\nüí¨ Pull Request: ${{ github.event.pull_request.title }} (${ { github.event.pull_request.url }})" https://discord.com/api/webhooks/1370363547413909564/UvwXHJ-odwQ-i79qNfqONkhpAzEr5x9zo7BERsOqUYKyYALie4SnKp-heLaWPRoz8tPK
          fi

          # Invia il messaggio al webhook Discord
          curl -X POST -H "Content-Type: application/json" -d "{\"content\": \"$MESSAGE\"}" 
